<div class="modal-header">
    <h2 class="modal-header-title">Gift Wrapping</h2>
    <a href="#" class="modal-close" aria-label="Close"><span aria-hidden="true">&#215;</span></a>
</div>
<div class="modal-body">
    <p>Please choose how you'd like to have this item gift wrapped.</p>

    <form class="giftWrapping-form" class="form" action="{{urls.cart}}" method="post">
        <input type="hidden" name="action" value="save_giftwrapping">
        <input type="hidden" name="item_id" value="{{item_id}}">
        <fieldset class="form-fieldset">

            <div class="form-field" {{#compare quantity 1 operator='==='}}style="display:none"{{/compare}}>
                    <input type="radio" class="form-radio" name="giftwraptype" id="girftWrapping-radio-same" checked="checked" value="same">
                    <label class="form-label" for="girftWrapping-radio-same">I'd like to wrap each of this item using the same wrapping options</label>

                    <input type="radio" class="form-radio" name="giftwraptype" id="girftWrapping-radio-all" value="different">
                    <label class="form-label" for="girftWrapping-radio-all">I'd like to gift wrap each item separately</label>
            </div>

            <div class="giftWrapping-single">
                <div class="form-field">
                    <label class="form-label" for="giftWrapping-select-same">
                        Gift Wrapping - {{product_name}}
                        {{#each gift_wrappings}}
                            {{#if preview_image}}
                                <a id="giftWrapping-image-all-{{id}}" class="giftWrapping-image-all" {{#unless selected}}style="display:none"{{/unless}} target="_blank" href="{{@image preview_image}}">
                                    Preview
                                </a>
                            {{/if}}
                        {{/each}}
                    </label>
                    <select class="form-select giftWrapping-select" name="giftwrapping[all]" id="giftWrapping-select-same" data-index="all">
                        <option value="">Please choose a type of giftwrapping</option>
                        {{#each gift_wrappings}}
                            <option {{#if selected}}selected{{/if}} value="{{id}}">{{name}} - ({{price.formatted}})</option>
                        {{/each}}
                    </select>
                </div>

                <div class="form-field" id="giftWrapping-message-all" {{#unless selected_wrapping}}style="display:none"{{/unless}}>
                    <label class="form-label" for="giftMessage">Gift Message</label>
                    <textarea class="form-input" name="giftmessage[all]" id="giftMessage" rows="3">{{selected_wrapping.message}}</textarea>
                </div>
            </div>


            <div class="giftWrapping-multiple">
                {{#for quantity this}}
                    <div class="form-field">
                        <label class="form-label" for="giftWrapping-select-{{$index}}">
                            Item {{$index}} - {{product_name}}
                            {{#each gift_wrappings}}
                                {{#if preview_image}}
                                    <a id="giftWrapping-image-{{../../$index}}-{{id}}" class="giftWrapping-image-{{../../$index}}" style="display:none" target="_blank" href="{{@image preview_image}}">
                                        Preview
                                    </a>
                                {{/if}}
                            {{/each}}
                        </label>
                        <select class="form-select giftWrapping-select" name="giftwrapping[{{$index}}]" id="giftWrapping-select-{{$index}}" data-index="{{$index}}">
                            <option value="">Please choose a type of giftwrapping</option>
                            {{#each gift_wrappings}}
                                <option {{#if selected}}selected{{/if}} value="{{id}}">{{name}} - ({{price.formatted}})</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-field" id="giftWrapping-message-{{$index}}" style="display:none">
                        <label class="form-label" for="giftMessage">Gift Message</label>
                        <textarea class="form-input" name="giftmessage[{{$index}}]" id="giftMessage" rows="3">{{selected_wrapping.message}}</textarea>
                    </div>
                {{/for}}
            </div>


        </fieldset>
        <div class="form-actions">
            <button class="button button--primary" type="submit">Submit</button>
        </div>
    </form>
</div>
